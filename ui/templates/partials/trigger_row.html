{% if trigger %}
<tr id="trigger-row-{{ index }}">
    <td><strong>{{ trigger.symbol }}</strong></td>
    <td>
        {% if trigger.condition == "<" %}
            <span class="badge bg-danger">Below</span>
        {% elif trigger.condition == ">" %}
            <span class="badge bg-success">Above</span>
        {% elif trigger.condition == "drop_pct" %}
            <span class="badge bg-warning text-dark">Drop %</span>
        {% elif trigger.condition == "rise_pct" %}
            <span class="badge bg-info text-dark">Rise %</span>
        {% else %}
            <span class="badge bg-secondary">{{ trigger.condition }}</span>
        {% endif %}
    </td>
    <td>${{ "%.2f"|format(trigger.value if trigger.value is defined else trigger.price) }}</td>
    <td>
        <span class="badge {% if trigger.action == 'notify' %}bg-primary{% elif trigger.action == 'buy' %}bg-success{% elif trigger.action == 'sell' %}bg-danger{% else %}bg-secondary{% endif %}">
            {{ trigger.action }}
        </span>
    </td>
    <td>
        {% if trigger.enabled %}
            <span class="badge bg-success">Enabled</span>
        {% else %}
            <span class="badge bg-secondary">Disabled</span>
        {% endif %}
    </td>
    <td>
        {% if trigger.last_fired %}
            <small class="text-muted">{{ trigger.last_fired[:19]|replace('T', ' ') }}</small>
        {% else %}
            <span class="text-muted">Never</span>
        {% endif %}
    </td>
    <td>
        <form method="POST" action="/triggers/{{ index }}/toggle"
              hx-post="/triggers/{{ index }}/toggle"
              hx-target="#trigger-row-{{ index }}"
              hx-swap="outerHTML"
              style="display:inline;">
            <button type="submit" class="btn btn-sm {% if trigger.enabled %}btn-warning{% else %}btn-success{% endif %}"
                    title="{% if trigger.enabled %}Disable{% else %}Enable{% endif %} trigger">
                <i class="bi bi-toggle-{% if trigger.enabled %}on{% else %}off{% endif %}"></i>
            </button>
        </form>
        <form method="POST" action="/triggers/{{ index }}/delete" style="display:inline;"
              onsubmit="return confirm('Are you sure you want to delete this trigger?');">
            <button type="submit" class="btn btn-sm btn-danger" title="Delete trigger">
                <i class="bi bi-trash"></i>
            </button>
        </form>
    </td>
</tr>
{% else %}
<tr id="trigger-row-{{ index }}">
    <td colspan="6" class="table-success">{{ message or "Trigger updated" }}</td>
</tr>
{% endif %}

